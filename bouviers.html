<!-- Bouvier Puppies: Currently Available (no photos) -->
<section class="availability" aria-labelledby="available-bouviers-title">
  <div class="availability-head">
    <h2 id="available-bouviers-title">Currently Available</h2>
    <p class="availability-sub">
      Availability updates automatically. For questions, please contact us or submit an application.
    </p>
  </div>

  <div id="available-bouviers-status" class="availability-status">Loading availability...</div>

  <div id="available-bouviers-list" class="availability-list" hidden></div>
</section>

<style>
  .availability { margin: 2.25rem 0; }
  .availability-head { margin-bottom: 1rem; }
  .availability-sub { margin: 0.35rem 0 0; opacity: 0.8; }

  .availability-status { margin-top: 0.75rem; opacity: 0.85; }

  .availability-list {
    margin-top: 1rem;
    display: grid;
    gap: 0.9rem;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .puppy-card {
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 14px;
    padding: 1rem;
    background: rgba(255,255,255,0.03);
  }

  .puppy-card h3 {
    margin: 0 0 0.5rem;
    font-size: 1.05rem;
  }

  .puppy-meta {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: 0.35rem;
    opacity: 0.92;
  }

  .puppy-meta li { display: flex; gap: 0.5rem; }
  .puppy-meta strong { min-width: 92px; opacity: 0.85; font-weight: 600; }
</style>

<script>
  (async function renderBouvierAvailability() {
    const statusEl = document.getElementById("available-bouviers-status");
    const listEl = document.getElementById("available-bouviers-list");

    function escapeHtml(s) {
      return String(s || "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function field(v) {
      const t = String(v || "").trim();
      return t ? t : "Not listed";
    }

    try {
      const res = await fetch("data/available-bouviers.json", { cache: "no-store" });
      if (!res.ok) throw new Error(`Fetch failed: ${res.status}`);

      const data = await res.json();
      const items = Array.isArray(data.available) ? data.available : [];

      if (!items.length) {
        statusEl.textContent = "No puppies are listed as available at this time.";
        listEl.hidden = true;
        return;
      }

      statusEl.textContent = "";
      listEl.hidden = false;

      listEl.innerHTML = items.map((p, i) => {
        const title = p.litter ? `Litter: ${p.litter}` : `Available Puppy ${i + 1}`;
        return `
          <article class="puppy-card">
            <h3>${escapeHtml(title)}</h3>
            <ul class="puppy-meta">
              <li><strong>DOB</strong><span>${escapeHtml(field(p.dob))}</span></li>
              <li><strong>Sex</strong><span>${escapeHtml(field(p.sex))}</span></li>
              <li><strong>Coat</strong><span>${escapeHtml(field(p.coatColor))}</span></li>
              <li><strong>Collar</strong><span>${escapeHtml(field(p.collarColor))}</span></li>
            </ul>
          </article>
        `;
      }).join("");
    } catch (err) {
      statusEl.textContent = "Availability could not be loaded right now. Please try again later.";
      listEl.hidden = true;
      console.error(err);
    }
  })();
</script>
